# [JavaScript] Basic 11
> 인사이드 자바스크립트

## 함수의 다양한 형태

### 1. 콜백함수
자바스크립트 함수 표현식에서 함수이름은 꼭 붙이지 않아도 된다. (익명함수)
이러한 익명 함수의 대표적인 용도가 **콜백함수**이다.

콜백 함수는 코드를 통해 명시적으로 호출하는 함수가 아니라, **함수를 등록하기만 하고, 어떠한 이벤트가 발생하거나 특정 시점에 도달했을 때 시스템에서 호출되는 함수**를 말한다.
특정 함수의 인자로 넘겨서 코드 내부에서 호출 되는 함수도 콜백 함수가 될 수 있다.

#### 1-1. 이벤트 핸들러

```
								개발자 등록
									|
[ 이벤트 ] -> [ 이벤트 핸들러 ] -> [ 콜백 함수 ] 
		  |				   |
		이벤트 발생		 함수 호출
```

대표적인 콜백 함수의 사용 예가 자바스크립트에서의 이벤트 핸들러 처리이다. 
DOM에 이벤트가 발생할 경우, 브라우저는 정의된 DOM이벤트에 해당하는 이벤트 핸들러를 실행시킨다. 만약 이러한 이벤트 핸들러에 콜백함수가 등록했다면 콜백 함수는 이벤트가 발생할 때마다 브라우저에 의해 실행되게 된다.

<이벤트 핸들러 예제 코드>
```javascript
window.onload = function(){
	alert('This is the callback function.');
}
```
1. `window.onload`는 이벤트 핸들러로서, 웹 페이지의 로딩이 끝나는 시점에 load 이벤트가 발생하면 실행된다.
2. `window.onload` 이벤트 핸들러를 익명 함수로 연결했다. 따라서 익명함수가 콜백함수로 등록된 것이다.


### 2. 즉시 실행 함수
함수를 정의함과 동시에 바로 실행하는 함수를 **즉시 실행 함수**라고 한다.

<즉시 실행 함수 예제 코드>
```javascript
(function (name) {
	console.log('This is the immediate function -> ' + name);
})('foo');

// 결과 : This is the immediate function -> foo
```
1. 익명함수를 정의함과 동시에 결과가 출력된다.
2. 괄호의 안에 값을 추가해 즉시실행 함수의 인자로 넘길 수 있다. ('foo')
#### 2-1. 즉시 실행 함수 만드는 방법
1. 함수 리터럴을 괄호()로 둘러싼다. 이 때 함수의 이름이 있든 없든 상관없다.
2. 함수가 바로 호출될 수 있게 괄호()를 추가한다.
3. 이렇게 선언되자마자 실행되게 만든 즉시 실행 함수의 경우, 같은 함수를 다시 호출할 수 없다.
 
 **최초 한번의 실행만을 필요로 하는 초기화 코드 부분** 등에 사용할 수 있다.
 
#### 2-2. 즉시 실행 함수의 또 다른 용도
JQuery와 같은 자바스크립트 라이브러리나 프레임 워크 소스들에서 사용된다.
jQuery의 최신 소스 코드를 살펴보면 소스의 처음 부분과 끝 부분이 아래 예제와 같이 즉시 실행 함수 형태로 구성되어있다.
즉, **jQuery 소스 코드 전체가 즉시 실행 함수로 감싸져 있다.**
```javascript
(function (window, undefined) {
	...
})(window);
```
**jQuery에서 즉시 실행 함수를 사용하는 이유**
> 자바스크립트의 변수 유효 범위 특성 때문이다.
> 자바스크립트에서는 함수 유효 범위를 지원한다.
> 기본적으로 자바스크립트는 변수를 선언할 경우 프로그램 전체에서 접근할 수 있는 전역 유효 범위를 가지게 된다.
> 그러나 함수 내부에서 정의된 매개변수와 변수들은 함수 코드 내부에서만 유효할 뿐 함수 밖에서는 유효하지 않다.
> 이것은 달리 말하면 함수 외부의 코드에서 함수 내부의 변수를 액세스 하는게 불가능 하다는 것이다.
>  
>   따라서 라이브러리 코드를 즉시 실행 함수 내부에 정의해두게 되면, 라이브러리 내의 변수들은 함수 외부에서 접근할 수 없다.
>   따라서 즉시 실행 함수 내에 라이브러리 코드를 추가하면 전역 네임스페이스를 더럽히지 않으므로 이후 다른 자바스크립트 라이브러리들이 동시에 로드가 되더라도 라이브러리 간 **변수 이름 충돌 같은 문제를 방지할 수 있다.**

#### 즉시 실행 함수 패턴
라이브러리 코드가 로드되면 실행되는 초기화 작업을 할 때 사용한다.
라이브러리 코드가 처음 로드되어 초기화할 때 즉시 실행 함수 패턴이 많이 사용된다.

